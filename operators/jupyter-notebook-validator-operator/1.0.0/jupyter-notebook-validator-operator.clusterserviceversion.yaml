apiVersion: operators.coreos.com/v1alpha1
kind: ClusterServiceVersion
metadata:
  annotations:
    alm-examples: |-
      [
        {
          "apiVersion": "mlops.mlops.dev/v1alpha1",
          "kind": "NotebookValidationJob",
          "metadata": {
            "labels": {
              "app.kubernetes.io/managed-by": "kustomize",
              "app.kubernetes.io/name": "jupyter-notebook-validator-operator"
            },
            "name": "notebookvalidationjob-sample",
            "namespace": "jupyter-notebook-validator-operator"
          },
          "spec": {
            "notebook": {
              "git": {
                "ref": "main",
                "url": "https://github.com/tosin2013/jupyter-notebook-validator-test-notebooks.git"
              },
              "path": "notebooks/tier1-simple/01-hello-world.ipynb"
            },
            "podConfig": {
              "containerImage": "quay.io/jupyter/scipy-notebook:latest",
              "env": [
                {
                  "name": "JUPYTER_ENABLE_LAB",
                  "value": "yes"
                }
              ],
              "resources": {
                "limits": {
                  "cpu": "1000m",
                  "memory": "1Gi"
                },
                "requests": {
                  "cpu": "500m",
                  "memory": "512Mi"
                }
              },
              "serviceAccountName": "notebook-validator-jupyter-notebook-validator-runner"
            },
            "timeout": "30m"
          }
        }
      ]
    capabilities: Seamless Upgrades
    categories: AI/Machine Learning, Developer Tools, Integration & Delivery
    containerImage: quay.io/takinosh/jupyter-notebook-validator-operator:v1.0.0
    createdAt: "2025-11-25T18:44:02Z"
    description: Kubernetes operator for validating Jupyter notebooks in MLOps workflows
    operators.operatorframework.io/builder: operator-sdk-v1.37.0
    operators.operatorframework.io/project_layout: go.kubebuilder.io/v4
    repository: https://github.com/tosin2013/jupyter-notebook-validator-operator
    support: Community
  name: jupyter-notebook-validator-operator.v1.0.0
  namespace: placeholder
spec:
  apiservicedefinitions: {}
  customresourcedefinitions:
    owned:
    - description: NotebookValidationJob is the Schema for the notebookvalidationjobs
        API
      displayName: Notebook Validation Job
      kind: NotebookValidationJob
      name: notebookvalidationjobs.mlops.mlops.dev
      version: v1alpha1
  description: |
    ## Jupyter Notebook Validator Operator

    The Jupyter Notebook Validator Operator automates Jupyter notebook validation in MLOps workflows on Kubernetes and OpenShift.

    ### Features

    * **Git Integration**: Clone notebooks from Git repositories (HTTPS, SSH) with credential support
    * **Papermill Execution**: Execute notebooks using Papermill with configurable parameters
    * **Golden Notebook Comparison**: Compare outputs against golden notebooks with configurable tolerances
    * **Model Validation**: Validate notebooks against deployed ML models (KServe, OpenShift AI, vLLM, etc.)
    * **Build Integration**: Auto-detect requirements.txt and build custom images using S2I or Tekton
    * **Credential Management**: Inject credentials via Kubernetes Secrets or External Secrets Operator

    ### Supported Platforms

    * Kubernetes 1.31+
    * OpenShift 4.18 - 4.20
    * Tekton Pipelines v0.65+

    ### Getting Started

    1. Create a NotebookValidationJob resource pointing to your notebook repository
    2. The operator clones the repository, builds dependencies if needed, and executes the notebook
    3. Results are stored in the job status with detailed cell-by-cell execution information

    ### Example

    ```yaml
    apiVersion: mlops.mlops.dev/v1alpha1
    kind: NotebookValidationJob
    metadata:
      name: my-notebook-validation
    spec:
      notebook:
        git:
          url: "https://github.com/myorg/notebooks.git"
          ref: "main"
        path: "notebooks/analysis.ipynb"
      podConfig:
        containerImage: "quay.io/jupyter/minimal-notebook:latest"
      timeout: "10m"
    ```

    ### Documentation

    * [Architecture Overview](https://github.com/tosin2013/jupyter-notebook-validator-operator/blob/main/docs/ARCHITECTURE_OVERVIEW.md)
    * [Testing Guide](https://github.com/tosin2013/jupyter-notebook-validator-operator/blob/main/docs/TESTING_GUIDE.md)
    * [ADRs](https://github.com/tosin2013/jupyter-notebook-validator-operator/tree/main/docs/adrs)
  displayName: Jupyter Notebook Validator Operator
  icon:
  - base64data: iVBORw0KGgoAAAANSUhEUgAAAGAAAABgCAYAAADimHc4AAAACXBIWXMAAAsTAAALEwEAmpwYAAAF8WlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS42LWMxNDUgNzkuMTYzNDk5LCAyMDE4LzA4LzEzLTE2OjQwOjIyICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIgeG1sbnM6cGhvdG9zaG9wPSJodHRwOi8vbnMuYWRvYmUuY29tL3Bob3Rvc2hvcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RFdnQ9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZUV2ZW50IyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ0MgMjAxOSAoTWFjaW50b3NoKSIgeG1wOkNyZWF0ZURhdGU9IjIwMjQtMTEtMjVUMDA6MDA6MDArMDA6MDAiIHhtcDpNb2RpZnlEYXRlPSIyMDI0LTExLTI1VDAwOjAwOjAwKzAwOjAwIiB4bXA6TWV0YWRhdGFEYXRlPSIyMDI0LTExLTI1VDAwOjAwOjAwKzAwOjAwIiBkYzpmb3JtYXQ9ImltYWdlL3BuZyIgcGhvdG9zaG9wOkNvbG9yTW9kZT0iMyI+PC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz4B//79/Pv6+fj39vX08/Lx8O/u7ezr6uno5+bl5OPi4eDf3t3c29rZ2NfW1dTT0tHQz87NzMvKycjHxsXEw8LBwL++vby7urm4t7a1tLOysbCvrq2sq6qpqKempaSjoqGgn56dnJuamZiXlpWUk5KRkI+OjYyLiomIh4aFhIOCgYB/fn18e3p5eHd2dXRzcnFwb25tbGtqaWhnZmVkY2JhYF9eXVxbWllYV1ZVVFNSUVBPTk1MS0pJSEdGRURDQkFAPz49PDs6OTg3NjU0MzIxMC8uLSwrKikoJyYlJCMiISAfHh0cGxoZGBcWFRQTEhEQDw4NDAsKCQgHBgUEAwIBAAAh+QQAAAAAACwAAAAAYABgAAAI/wD/CRxIsKDBgwgTKlzIsKHDhxAjSpxIsaLFixgzatzIsaPHjyBDihxJsqTJkyhTqlzJsqXLlzBjypxJs6bNmzhz6tzJs6fPn0CDCh1KtKjRo0iTKl3KtKnTp1CjSp1KtarVq1izat3KtavXr2DDih1LtqzZs2jTql3Ltq3bt3Djyp1Lt67du3jz6t3Lt6/fv4ADCx5MuLDhw4gTK17MuLHjx5AjS55MubLly5gza97MubPnz6BDix5NurTp06hTq17NurXr17Bjy55Nu7bt27hz697Nu7fv38CDCx9OvLjx48iTK1/OvLnz59CjS59Ovbr169iza9/Ovbv37+DDi/8fT768+fPo06tfz769+/fw48ufT7++/fv48+vfz7+///8ABijggAQWaOCBCCao4IIMNujggxBGKOGEFFZo4YUYZqjhhhx26OGHIIYo4ogklmjiiSimqOKKLLbo4NkrtujijDTWaOON
    mediatype: image/png
  install:
    spec:
      clusterPermissions:
      - rules:
        - apiGroups:
          - ""
          resources:
          - configmaps
          verbs:
          - get
          - list
        - apiGroups:
          - ""
          resources:
          - events
          verbs:
          - create
          - patch
          - update
        - apiGroups:
          - ""
          resources:
          - persistentvolumeclaims
          verbs:
          - create
          - delete
          - get
          - list
          - patch
          - update
          - watch
        - apiGroups:
          - ""
          resources:
          - pods
          verbs:
          - create
          - delete
          - get
          - list
          - patch
          - update
          - watch
        - apiGroups:
          - ""
          resources:
          - pods/log
          verbs:
          - get
          - list
        - apiGroups:
          - ""
          resources:
          - pods/status
          verbs:
          - get
          - list
          - watch
        - apiGroups:
          - ""
          resources:
          - secrets
          verbs:
          - create
          - get
          - list
          - watch
        - apiGroups:
          - ""
          resources:
          - serviceaccounts
          verbs:
          - create
          - get
          - list
          - watch
        - apiGroups:
          - apps
          resources:
          - deployments
          verbs:
          - get
          - list
          - watch
        - apiGroups:
          - build.openshift.io
          resources:
          - buildconfigs
          - builds
          verbs:
          - create
          - delete
          - get
          - list
          - patch
          - update
          - watch
        - apiGroups:
          - image.openshift.io
          resources:
          - imagestreams
          verbs:
          - create
          - get
          - list
          - patch
          - update
          - watch
        - apiGroups:
          - machinelearning.seldon.io
          resources:
          - seldondeployments
          verbs:
          - get
          - list
          - watch
        - apiGroups:
          - mlops.mlops.dev
          resources:
          - notebookvalidationjobs
          verbs:
          - create
          - delete
          - get
          - list
          - patch
          - update
          - watch
        - apiGroups:
          - mlops.mlops.dev
          resources:
          - notebookvalidationjobs/finalizers
          verbs:
          - update
        - apiGroups:
          - mlops.mlops.dev
          resources:
          - notebookvalidationjobs/status
          verbs:
          - get
          - patch
          - update
        - apiGroups:
          - ray.io
          resources:
          - rayclusters
          - rayservices
          verbs:
          - get
          - list
          - watch
        - apiGroups:
          - security.openshift.io
          resourceNames:
          - pipelines-scc
          - privileged
          resources:
          - securitycontextconstraints
          verbs:
          - get
          - list
          - update
          - use
        - apiGroups:
          - serving.kserve.io
          resources:
          - inferenceservices
          verbs:
          - get
          - list
          - watch
        - apiGroups:
          - serving.kserve.io
          resources:
          - servingruntimes
          verbs:
          - get
          - list
          - watch
        - apiGroups:
          - serving.yatai.ai
          resources:
          - bentodeployments
          - bentos
          verbs:
          - get
          - list
          - watch
        - apiGroups:
          - tekton.dev
          resources:
          - pipelineruns
          - pipelines
          - taskruns
          - tasks
          verbs:
          - create
          - delete
          - get
          - list
          - patch
          - update
          - watch
        - apiGroups:
          - authentication.k8s.io
          resources:
          - tokenreviews
          verbs:
          - create
        - apiGroups:
          - authorization.k8s.io
          resources:
          - subjectaccessreviews
          verbs:
          - create
        serviceAccountName: notebook-validator-controller-manager
      deployments:
      - label:
          app.kubernetes.io/managed-by: kustomize
          app.kubernetes.io/name: jupyter-notebook-validator-operator
          control-plane: controller-manager
        name: notebook-validator-controller-manager
        spec:
          replicas: 1
          selector:
            matchLabels:
              control-plane: controller-manager
          strategy: {}
          template:
            metadata:
              annotations:
                kubectl.kubernetes.io/default-container: manager
              labels:
                control-plane: controller-manager
            spec:
              containers:
              - args:
                - --health-probe-bind-address=:8081
                - --metrics-bind-address=127.0.0.1:8080
                - --leader-elect
                command:
                - /manager
                env:
                - name: PLATFORM
                  value: openshift
                - name: GIT_INIT_IMAGE
                image: quay.io/takinosh/jupyter-notebook-validator-operator:v1.0.0
                imagePullPolicy: Always
                livenessProbe:
                  httpGet:
                    path: /healthz
                    port: 8081
                  initialDelaySeconds: 15
                  periodSeconds: 20
                name: manager
                ports:
                - containerPort: 9443
                  name: webhook-server
                  protocol: TCP
                readinessProbe:
                  failureThreshold: 3
                  httpGet:
                    path: /readyz
                    port: 8081
                  initialDelaySeconds: 10
                  periodSeconds: 10
                resources:
                  limits:
                    cpu: 500m
                    memory: 128Mi
                  requests:
                    cpu: 10m
                    memory: 64Mi
                securityContext:
                  allowPrivilegeEscalation: false
                  capabilities:
                    drop:
                    - ALL
                volumeMounts:
                - mountPath: /tmp/k8s-webhook-server/serving-certs
                  name: cert
                  readOnly: true
              - args:
                - --secure-listen-address=0.0.0.0:8443
                - --upstream=http://127.0.0.1:8080/
                - --logtostderr=true
                - --v=0
                image: gcr.io/kubebuilder/kube-rbac-proxy:v0.16.0
                name: kube-rbac-proxy
                ports:
                - containerPort: 8443
                  name: https
                  protocol: TCP
                resources:
                  limits:
                    cpu: 500m
                    memory: 128Mi
                  requests:
                    cpu: 5m
                    memory: 64Mi
                securityContext:
                  allowPrivilegeEscalation: false
                  capabilities:
                    drop:
                    - ALL
              securityContext:
                runAsNonRoot: true
              serviceAccountName: notebook-validator-controller-manager
              terminationGracePeriodSeconds: 10
              volumes:
              - name: cert
                secret:
                  defaultMode: 420
                  secretName: webhook-server-cert
      permissions:
      - rules:
        - apiGroups:
          - ""
          resources:
          - configmaps
          verbs:
          - get
          - list
          - watch
          - create
          - update
          - patch
          - delete
        - apiGroups:
          - coordination.k8s.io
          resources:
          - leases
          verbs:
          - get
          - list
          - watch
          - create
          - update
          - patch
          - delete
        - apiGroups:
          - ""
          resources:
          - events
          verbs:
          - create
          - patch
        serviceAccountName: notebook-validator-controller-manager
    strategy: deployment
  installModes:
  - supported: false
    type: OwnNamespace
  - supported: false
    type: SingleNamespace
  - supported: false
    type: MultiNamespace
  - supported: true
    type: AllNamespaces
  keywords:
  - jupyter
  - notebook
  - validation
  - mlops
  - machine-learning
  - papermill
  - tekton
  - openshift
  links:
  - name: Documentation
    url: https://github.com/tosin2013/jupyter-notebook-validator-operator/tree/main/docs
  - name: GitHub Repository
    url: https://github.com/tosin2013/jupyter-notebook-validator-operator
  - name: Architecture Decision Records
    url: https://github.com/tosin2013/jupyter-notebook-validator-operator/tree/main/docs/adrs
  maintainers:
  - email: takinosh@redhat.com
    name: Tosin Akinosho
  maturity: alpha
  minKubeVersion: 1.31.0
  provider:
    name: Tosin Akinosho
    url: https://github.com/tosin2013
  version: 1.0.0
  webhookdefinitions:
  - admissionReviewVersions:
    - v1
    containerPort: 443
    deploymentName: notebook-validator-controller-manager
    failurePolicy: Fail
    generateName: mnotebookvalidationjob.kb.io
    rules:
    - apiGroups:
      - mlops.mlops.dev
      apiVersions:
      - v1alpha1
      operations:
      - CREATE
      - UPDATE
      resources:
      - notebookvalidationjobs
    sideEffects: None
    targetPort: 9443
    type: MutatingAdmissionWebhook
    webhookPath: /mutate-mlops-mlops-dev-v1alpha1-notebookvalidationjob
  - admissionReviewVersions:
    - v1
    containerPort: 443
    deploymentName: notebook-validator-controller-manager
    failurePolicy: Fail
    generateName: vnotebookvalidationjob.kb.io
    rules:
    - apiGroups:
      - mlops.mlops.dev
      apiVersions:
      - v1alpha1
      operations:
      - CREATE
      - UPDATE
      resources:
      - notebookvalidationjobs
    sideEffects: None
    targetPort: 9443
    type: ValidatingAdmissionWebhook
    webhookPath: /validate-mlops-mlops-dev-v1alpha1-notebookvalidationjob
