apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  name: subgraphs.apollographql.com
spec:
  group: apollographql.com
  names:
    categories: []
    kind: Subgraph
    plural: subgraphs
    shortNames: []
    singular: subgraph
  scope: Namespaced
  versions:
  - additionalPrinterColumns: []
    name: v1alpha2
    schema:
      openAPIV3Schema:
        description: Auto-generated derived type for SubgraphSpec via `CustomResource`
        properties:
          spec:
            description: Subgraph Specification
            properties:
              endpoint:
                description: Subgraph endpoint. This is optional for connector subgraphs
                format: uri
                nullable: true
                type: string
              name:
                description: Optional override for subgraph name used in composition. If not provided, the name will be constructed from the Kubernetes resource name, namespace, and any SupergraphSchema prefix.
                nullable: true
                type: string
              schema:
                description: Subgraph schema source
                oneOf:
                - required:
                  - sdl
                - required:
                  - oci
                - required:
                  - ociImage
                properties:
                  oci:
                    description: OCI artifact schema source
                    properties:
                      reference:
                        description: OCI artifact reference
                        type: string
                    required:
                    - reference
                    type: object
                  ociImage:
                    description: OCI image schema source
                    properties:
                      path:
                        description: Absolute path in the OCI image
                        type: string
                      reference:
                        description: OCI image reference
                        type: string
                    required:
                    - path
                    - reference
                    type: object
                  sdl:
                    description: In-line schema source
                    type: string
                type: object
            required:
            - schema
            type: object
          status:
            description: Status of a `Subgraph` resource
            nullable: true
            properties:
              conditions:
                description: |-
                  Set of conditions for this `Subgraph`

                  Following Kubernetes API conventions, conditions are represented as a list of named subobjects instead of a map.
                items:
                  description: Status condition
                  properties:
                    lastTransitionTime:
                      description: lastTransitionTime is the last time the condition transitioned from one status to another. This should be when the underlying condition changed. If that is not known, then using the time when the API field changed is acceptable.
                      format: date-time
                      type: string
                    message:
                      description: message is a human readable message indicating details about the transition. This may be an empty string.
                      type: string
                    observedGeneration:
                      description: observedGeneration represents the .metadata.generation that the condition was set based upon. For instance, if .metadata.generation is currently 12, but the .status.conditions\[x\].observedGeneration is 9, the condition is out of date with respect to the current state of the instance.
                      format: int64
                      nullable: true
                      type: integer
                    reason:
                      description: reason contains a programmatic identifier indicating the reason for the conditionâ€™s last transition. Producers of specific condition types may define expected values and meanings for this field, and whether the values are considered a guaranteed API. The value should be a CamelCase string. This field may not be empty.
                      type: string
                    schema:
                      description: Schema status
                      nullable: true
                      oneOf:
                      - required:
                        - sdlHash
                      - required:
                        - oci
                      - required:
                        - ociImage
                      properties:
                        endpoint:
                          description: Known endpoint
                          format: uri
                          nullable: true
                          type: string
                        oci:
                          description: OCI artifact source status
                          properties:
                            sdlHash:
                              description: Digest of the artifact
                              type: string
                            updatedAt:
                              description: last time this was updated
                              format: date-time
                              type: string
                          required:
                          - sdlHash
                          - updatedAt
                          type: object
                        ociImage:
                          description: OCI image source status
                          properties:
                            sdlHash:
                              description: Digest of the artifact
                              type: string
                            updatedAt:
                              description: last time this was updated
                              format: date-time
                              type: string
                          required:
                          - sdlHash
                          - updatedAt
                          type: object
                        sdlHash:
                          description: In-line schema source status
                          type: string
                      type: object
                    status:
                      description: status of the condition, one of True, False, Unknown.
                      enum:
                      - 'True'
                      - 'False'
                      - Unknown
                      type: string
                    type:
                      description: type of condition in CamelCase or in foo.example.com/CamelCase.
                      type: string
                  required:
                  - lastTransitionTime
                  - message
                  - reason
                  - status
                  - type
                  type: object
                type: array
                x-kubernetes-list-map-keys:
                - type
                x-kubernetes-list-type: map
              schema:
                description: Latest schema detected by the Apollo Operator
                nullable: true
                oneOf:
                - required:
                  - sdlHash
                - required:
                  - oci
                - required:
                  - ociImage
                properties:
                  endpoint:
                    description: Known endpoint
                    format: uri
                    nullable: true
                    type: string
                  oci:
                    description: OCI artifact source status
                    properties:
                      sdlHash:
                        description: Digest of the artifact
                        type: string
                      updatedAt:
                        description: last time this was updated
                        format: date-time
                        type: string
                    required:
                    - sdlHash
                    - updatedAt
                    type: object
                  ociImage:
                    description: OCI image source status
                    properties:
                      sdlHash:
                        description: Digest of the artifact
                        type: string
                      updatedAt:
                        description: last time this was updated
                        format: date-time
                        type: string
                    required:
                    - sdlHash
                    - updatedAt
                    type: object
                  sdlHash:
                    description: In-line schema source status
                    type: string
                type: object
            required:
            - conditions
            type: object
        required:
        - spec
        title: Subgraph
        type: object
    served: true
    storage: true
    subresources:
      status: {}
