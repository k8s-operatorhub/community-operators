apiVersion: operators.coreos.com/v1alpha1
kind: ClusterServiceVersion
metadata:
  name: openclaw-operator.v0.10.11
  namespace: placeholder
  annotations:
    capabilities: "Auto Pilot"
    categories: "AI/Machine Learning, Developer Tools, Application Runtime"
    containerImage: ghcr.io/openclaw-rocks/openclaw-operator:v0.10.11
    createdAt: "2026-02-26T20:53:30Z"
    support: OpenClaw.rocks
    repository: https://github.com/OpenClaw-rocks/k8s-operator
    description: "A production-grade Kubernetes operator for deploying and managing OpenClaw AI agent instances with auto-updates, backup/restore, and security hardening."
    alm-examples: |-
      [
        {
          "apiVersion": "openclaw.rocks/v1alpha1",
          "kind": "OpenClawInstance",
          "metadata": {
            "name": "my-openclaw",
            "namespace": "default"
          },
          "spec": {
            "envFrom": [
              {
                "secretRef": {
                  "name": "openclaw-api-keys"
                }
              }
            ],
            "storage": {
              "persistence": {
                "enabled": true,
                "size": "10Gi"
              }
            }
          }
        },
        {
          "apiVersion": "openclaw.rocks/v1alpha1",
          "kind": "OpenClawInstance",
          "metadata": {
            "name": "production-openclaw",
            "namespace": "openclaw"
          },
          "spec": {
            "image": {
              "repository": "ghcr.io/openclaw/openclaw",
              "tag": "2026.2.3"
            },
            "config": {
              "raw": {
                "agents": {
                  "defaults": {
                    "model": {
                      "primary": "anthropic/claude-sonnet-4-20250514"
                    },
                    "sandbox": true
                  }
                }
              }
            },
            "envFrom": [
              {
                "secretRef": {
                  "name": "openclaw-api-keys"
                }
              }
            ],
            "resources": {
              "requests": {
                "cpu": "500m",
                "memory": "1Gi"
              },
              "limits": {
                "cpu": "2000m",
                "memory": "4Gi"
              }
            },
            "chromium": {
              "enabled": true,
              "resources": {
                "requests": {
                  "cpu": "250m",
                  "memory": "512Mi"
                },
                "limits": {
                  "cpu": "1000m",
                  "memory": "2Gi"
                }
              }
            },
            "storage": {
              "persistence": {
                "enabled": true,
                "size": "50Gi"
              }
            },
            "security": {
              "networkPolicy": {
                "enabled": true
              }
            },
            "autoUpdate": {
              "enabled": true,
              "backupBeforeUpdate": true,
              "rollbackOnFailure": true
            },
            "observability": {
              "serviceMonitor": {
                "enabled": true
              }
            }
          }
        }
      ]
    features.operators.openshift.io/disconnected: "false"
    features.operators.openshift.io/fips-compliant: "false"
    features.operators.openshift.io/proxy-aware: "false"
    features.operators.openshift.io/tls-profiles: "false"
    features.operators.openshift.io/token-auth-aws: "false"
    features.operators.openshift.io/token-auth-azure: "false"
    features.operators.openshift.io/token-auth-gcp: "false"
spec:
  displayName: OpenClaw Operator
  description: |
    ## OpenClaw Kubernetes Operator

    A production-grade Kubernetes operator for deploying and managing
    [OpenClaw](https://openclaw.ai) AI agent instances.

    ### What is OpenClaw?

    OpenClaw is an open-source platform for running AI agents that can interact
    with tools, browse the web, execute code, and automate complex workflows.
    The operator manages the full lifecycle of OpenClaw instances on Kubernetes --
    from initial deployment through upgrades, backups, and scaling.

    ### Key Capabilities

    - **Declarative Deployment**: Deploy OpenClaw instances using Kubernetes Custom Resources
    - **Automatic Updates**: OCI registry-based auto-updates with health checks and automatic rollback
    - **Backup and Restore**: Built-in backup/restore for stateful agent data
    - **Security-First**: Built-in NetworkPolicies, RBAC, Pod Security Standards, and a validating webhook
    - **Provider-Agnostic**: Support any AI provider (OpenAI, Anthropic, Google, etc.) via environment variables
    - **High Availability**: PodDisruptionBudgets, health probes, and graceful rolling upgrades
    - **Observability**: Prometheus ServiceMonitor, structured logging, and Kubernetes events
    - **Browser Automation**: Optional Chromium sidecar for web automation capabilities
    - **Skill Installation**: Install npm-based skills/plugins at startup via init containers

    ### Default Security Posture

    All containers run as non-root (UID 1000) with all Linux capabilities dropped,
    RuntimeDefault seccomp profiles, default-deny NetworkPolicies, and minimal RBAC
    permissions per instance.

    ### Managed Resources

    For each OpenClawInstance CR, the operator creates and manages:
    StatefulSet, Service, ServiceAccount, ConfigMap, PVC, Role, RoleBinding,
    NetworkPolicy, PodDisruptionBudget, and optionally Ingress and ServiceMonitor.
    All resources are owned by the CR and garbage-collected on deletion.

    ### Getting Started

    1. Install the operator via OLM or Helm
    2. Create a Secret with your AI provider API keys:
       ```
       kubectl create secret generic openclaw-api-keys \
         --from-literal=ANTHROPIC_API_KEY=sk-...
       ```
    3. Create an OpenClawInstance custom resource referencing the secret
    4. The operator handles the rest -- deployment, networking, security, and lifecycle management

    ### Prerequisites

    - Kubernetes 1.28+

    For full documentation, visit the
    [OpenClaw Operator docs](https://openclaw.rocks/blog/deploy-openclaw-kubernetes).
  maturity: alpha
  version: 0.10.11
  minKubeVersion: 1.28.0
  keywords:
    - ai
    - agent
    - openclaw
    - automation
    - llm
    - kubernetes
    - ai-agent
    - chatbot
    - browser-automation
    - chromium
    - machine-learning
  maintainers:
    - name: Jannes Stubbemann
      email: jannes@openclaw.rocks
  provider:
    name: OpenClaw.rocks
    url: https://openclaw.rocks
  links:
    - name: Website
      url: https://openclaw.rocks
    - name: Operator Documentation
      url: https://openclaw.rocks/blog/deploy-openclaw-kubernetes
    - name: API Reference
      url: https://github.com/OpenClaw-rocks/k8s-operator/blob/main/docs/api-reference.md
    - name: GitHub Repository
      url: https://github.com/OpenClaw-rocks/k8s-operator
    - name: Changelog
      url: https://github.com/OpenClaw-rocks/k8s-operator/blob/main/CHANGELOG.md
  icon:
    - base64data: PHN2ZyB2aWV3Qm94PSIwIDAgMTIwIDEyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8cGF0aCBkPSJNNjAgMTAgQzMwIDEwIDE1IDM1IDE1IDU1IEMxNSA3NSAzMCA5NSA0NSAxMDAgTDQ1IDExMCBMNTUgMTEwIEw1NSAxMDAgQzU1IDEwMCA2MCAxMDIgNjUgMTAwIEw2NSAxMTAgTDc1IDExMCBMNzUgMTAwIEM5MCA5NSAxMDUgNzUgMTA1IDU1IEMxMDUgMzUgOTAgMTAgNjAgMTBaIiBmaWxsPSJ1cmwoI2xvYnN0ZXItZ3JhZGllbnQpIi8+CiAgPHBhdGggZD0iTTIwIDQ1IEM1IDQwIDAgNTAgNSA2MCBDMTAgNzAgMjAgNjUgMjUgNTUgQzI4IDQ4IDI1IDQ1IDIwIDQ1WiIgZmlsbD0idXJsKCNsb2JzdGVyLWdyYWRpZW50KSIvPgogIDxwYXRoIGQ9Ik0xMDAgNDUgQzExNSA0MCAxMjAgNTAgMTE1IDYwIEMxMTAgNzAgMTAwIDY1IDk1IDU1IEM5MiA0OCA5NSA0NSAxMDAgNDVaIiBmaWxsPSJ1cmwoI2xvYnN0ZXItZ3JhZGllbnQpIi8+CiAgPHBhdGggZD0iTTQ1IDE1IFEzNSA1IDMwIDgiIHN0cm9rZT0iI2Y4NzE3MSIgc3Ryb2tlLXdpZHRoPSIyIiBzdHJva2UtbGluZWNhcD0icm91bmQiLz4KICA8cGF0aCBkPSJNNzUgMTUgUTg1IDUgOTAgOCIgc3Ryb2tlPSIjZjg3MTcxIiBzdHJva2Utd2lkdGg9IjIiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIvPgogIDxwYXRoIGQ9Ik0zMCAzMiBMNTIgMzIgTDUyIDQyIFE1MiA0NiA0OCA0NiBMMzQgNDYgUTMwIDQ2IDMwIDQyIFoiIGZpbGw9IiMwYTBhMGIiLz4KICA8cGF0aCBkPSJNNjggMzIgTDkwIDMyIEw5MCA0MiBROTAgNDYgODYgNDYgTDcyIDQ2IFE2OCA0NiA2OCA0MiBaIiBmaWxsPSIjMGEwYTBiIi8+CiAgPHBhdGggZD0iTTUyIDM2IEw2OCAzNiIgc3Ryb2tlPSIjMGEwYTBiIiBzdHJva2Utd2lkdGg9IjMiLz4KICA8cmVjdCB4PSIzMiIgeT0iMzQiIHdpZHRoPSI2IiBoZWlnaHQ9IjIiIGZpbGw9IiNmYWZhZmEiIG9wYWNpdHk9IjAuMyIgcng9IjEiLz4KICA8cmVjdCB4PSI3MCIgeT0iMzQiIHdpZHRoPSI2IiBoZWlnaHQ9IjIiIGZpbGw9IiNmYWZhZmEiIG9wYWNpdHk9IjAuMyIgcng9IjEiLz4KICA8ZGVmcz4KICAgIDxsaW5lYXJHcmFkaWVudCBpZD0ibG9ic3Rlci1ncmFkaWVudCIgeDE9IjAlIiB5MT0iMCUiIHgyPSIxMDAlIiB5Mj0iMTAwJSI+CiAgICAgIDxzdG9wIG9mZnNldD0iMCUiIHN0b3AtY29sb3I9IiNmODcxNzEiLz4KICAgICAgPHN0b3Agb2Zmc2V0PSIxMDAlIiBzdG9wLWNvbG9yPSIjZGMyNjI2Ii8+CiAgICA8L2xpbmVhckdyYWRpZW50PgogIDwvZGVmcz4KPC9zdmc+Cg==
      mediatype: image/svg+xml
  installModes:
    - type: OwnNamespace
      supported: true
    - type: SingleNamespace
      supported: true
    - type: MultiNamespace
      supported: false
    - type: AllNamespaces
      supported: true
  relatedImages:
    - name: openclaw-operator
      image: ghcr.io/openclaw-rocks/openclaw-operator:v0.10.11
    - name: openclaw
      image: ghcr.io/openclaw/openclaw:latest
    - name: chromium-sidecar
      image: ghcr.io/browserless/chromium:latest
  customresourcedefinitions:
    owned:
      - name: openclawinstances.openclaw.rocks
        version: v1alpha1
        kind: OpenClawInstance
        displayName: OpenClaw Instance
        description: Represents a managed OpenClaw AI agent instance with security, networking, storage, and observability configuration.
        specDescriptors:
          - path: image.repository
            displayName: Image Repository
            description: Container image repository for OpenClaw
            x-descriptors:
              - "urn:alm:descriptor:com.tectonic.ui:text"
          - path: image.tag
            displayName: Image Tag
            description: Container image tag
            x-descriptors:
              - "urn:alm:descriptor:com.tectonic.ui:text"
          - path: chromium.enabled
            displayName: Chromium Sidecar
            description: Enable Chromium browser automation sidecar
            x-descriptors:
              - "urn:alm:descriptor:com.tectonic.ui:booleanSwitch"
          - path: security.networkPolicy.enabled
            displayName: Network Policy
            description: Enable default-deny NetworkPolicy
            x-descriptors:
              - "urn:alm:descriptor:com.tectonic.ui:booleanSwitch"
          - path: storage.persistence.enabled
            displayName: Persistent Storage
            description: Enable persistent volume for agent data
            x-descriptors:
              - "urn:alm:descriptor:com.tectonic.ui:booleanSwitch"
          - path: storage.persistence.size
            displayName: Storage Size
            description: Size of the persistent volume
            x-descriptors:
              - "urn:alm:descriptor:com.tectonic.ui:text"
          - path: resources
            displayName: Resource Requirements
            description: CPU and memory requests/limits for the main container
            x-descriptors:
              - "urn:alm:descriptor:com.tectonic.ui:resourceRequirements"
          - path: networking.ingress.enabled
            displayName: Ingress
            description: Enable Ingress for external access
            x-descriptors:
              - "urn:alm:descriptor:com.tectonic.ui:booleanSwitch"
          - path: networking.ingress.className
            displayName: Ingress Class
            description: Name of the IngressClass to use
            x-descriptors:
              - "urn:alm:descriptor:com.tectonic.ui:text"
              - "urn:alm:descriptor:com.tectonic.ui:fieldDependency:networking.ingress.enabled:true"
          - path: networking.ingress.hosts
            displayName: Ingress Hosts
            description: Hosts to route traffic for
            x-descriptors:
              - "urn:alm:descriptor:com.tectonic.ui:fieldDependency:networking.ingress.enabled:true"
          - path: observability.serviceMonitor.enabled
            displayName: Prometheus ServiceMonitor
            description: Enable Prometheus ServiceMonitor for metrics scraping
            x-descriptors:
              - "urn:alm:descriptor:com.tectonic.ui:booleanSwitch"
          - path: autoUpdate.enabled
            displayName: Auto Update
            description: Enable automatic version updates from the OCI registry
            x-descriptors:
              - "urn:alm:descriptor:com.tectonic.ui:booleanSwitch"
          - path: autoUpdate.backupBeforeUpdate
            displayName: Backup Before Update
            description: Create a backup before applying updates
            x-descriptors:
              - "urn:alm:descriptor:com.tectonic.ui:booleanSwitch"
              - "urn:alm:descriptor:com.tectonic.ui:fieldDependency:autoUpdate.enabled:true"
          - path: autoUpdate.rollbackOnFailure
            displayName: Rollback on Failure
            description: Automatically rollback if the update fails health checks
            x-descriptors:
              - "urn:alm:descriptor:com.tectonic.ui:booleanSwitch"
              - "urn:alm:descriptor:com.tectonic.ui:fieldDependency:autoUpdate.enabled:true"
          - path: envFrom
            displayName: Environment From
            description: List of sources to populate environment variables (secrets, configmaps)
            x-descriptors:
              - "urn:alm:descriptor:com.tectonic.ui:fieldGroup:Environment"
          - path: availability.affinity
            displayName: Pod Affinity
            description: Pod scheduling affinity rules
            x-descriptors:
              - "urn:alm:descriptor:com.tectonic.ui:podAffinity"
          - path: chromium.resources
            displayName: Chromium Resources
            description: CPU and memory requests/limits for the Chromium sidecar
            x-descriptors:
              - "urn:alm:descriptor:com.tectonic.ui:resourceRequirements"
              - "urn:alm:descriptor:com.tectonic.ui:fieldDependency:chromium.enabled:true"
        statusDescriptors:
          - path: phase
            displayName: Phase
            description: Current lifecycle phase of the OpenClaw instance
            x-descriptors:
              - "urn:alm:descriptor:io.kubernetes.phase"
          - path: conditions
            displayName: Conditions
            description: Standard Kubernetes conditions for the instance
            x-descriptors:
              - "urn:alm:descriptor:io.kubernetes.conditions"
          - path: gatewayEndpoint
            displayName: Gateway Endpoint
            description: Internal service endpoint for the OpenClaw gateway
            x-descriptors:
              - "urn:alm:descriptor:text"
          - path: canvasEndpoint
            displayName: Canvas Endpoint
            description: Internal service endpoint for the OpenClaw canvas UI
            x-descriptors:
              - "urn:alm:descriptor:text"
          - path: observedGeneration
            displayName: Observed Generation
            description: Most recent generation observed by the controller
            x-descriptors:
              - "urn:alm:descriptor:text"
          - path: lastBackupTime
            displayName: Last Backup
            description: Timestamp of last successful backup
            x-descriptors:
              - "urn:alm:descriptor:text"
          - path: lastBackupPath
            displayName: Last Backup Path
            description: Storage path of the last successful backup
            x-descriptors:
              - "urn:alm:descriptor:text"
          - path: autoUpdate.latestVersion
            displayName: Latest Available Version
            description: Latest version available in the OCI registry
            x-descriptors:
              - "urn:alm:descriptor:text"
        resources:
          - kind: StatefulSet
            version: v1
          - kind: Service
            version: v1
          - kind: ServiceAccount
            version: v1
          - kind: ConfigMap
            version: v1
          - kind: PersistentVolumeClaim
            version: v1
          - kind: NetworkPolicy
            version: v1
          - kind: PodDisruptionBudget
            version: v1
          - kind: Ingress
            version: v1
          - kind: Role
            version: v1
          - kind: RoleBinding
            version: v1
          - kind: ServiceMonitor
            version: v1
          - kind: Job
            version: v1
  install:
    strategy: deployment
    spec:
      clusterPermissions:
        - serviceAccountName: openclaw-operator-controller-manager
          rules:
            - apiGroups:
                - ""
              resources:
                - configmaps
                - persistentvolumeclaims
                - serviceaccounts
                - services
              verbs:
                - create
                - delete
                - get
                - list
                - patch
                - update
                - watch
            - apiGroups:
                - ""
              resources:
                - events
              verbs:
                - create
                - patch
            - apiGroups:
                - ""
              resources:
                - secrets
              verbs:
                - get
                - list
                - watch
            - apiGroups:
                - ""
              resources:
                - pods
              verbs:
                - list
            - apiGroups:
                - apps
              resources:
                - deployments
              verbs:
                - delete
                - get
                - list
                - watch
            - apiGroups:
                - apps
              resources:
                - statefulsets
              verbs:
                - create
                - delete
                - get
                - list
                - patch
                - update
                - watch
            - apiGroups:
                - batch
              resources:
                - jobs
              verbs:
                - create
                - delete
                - get
                - list
                - watch
            - apiGroups:
                - monitoring.coreos.com
              resources:
                - servicemonitors
              verbs:
                - create
                - delete
                - get
                - list
                - patch
                - update
                - watch
            - apiGroups:
                - networking.k8s.io
              resources:
                - ingresses
                - networkpolicies
              verbs:
                - create
                - delete
                - get
                - list
                - patch
                - update
                - watch
            - apiGroups:
                - openclaw.rocks
              resources:
                - openclawinstances
              verbs:
                - create
                - delete
                - get
                - list
                - patch
                - update
                - watch
            - apiGroups:
                - openclaw.rocks
              resources:
                - openclawinstances/finalizers
              verbs:
                - update
            - apiGroups:
                - openclaw.rocks
              resources:
                - openclawinstances/status
              verbs:
                - get
                - patch
                - update
            - apiGroups:
                - policy
              resources:
                - poddisruptionbudgets
              verbs:
                - create
                - delete
                - get
                - list
                - patch
                - update
                - watch
            - apiGroups:
                - rbac.authorization.k8s.io
              resources:
                - rolebindings
                - roles
              verbs:
                - create
                - delete
                - get
                - list
                - patch
                - update
                - watch
            # Leader election
            - apiGroups:
                - ""
              resources:
                - configmaps
              verbs:
                - get
                - list
                - watch
                - create
                - update
                - patch
                - delete
            - apiGroups:
                - coordination.k8s.io
              resources:
                - leases
              verbs:
                - get
                - list
                - watch
                - create
                - update
                - patch
                - delete
      deployments:
        - name: openclaw-operator-controller-manager
          spec:
            replicas: 1
            selector:
              matchLabels:
                control-plane: controller-manager
            template:
              metadata:
                annotations:
                  kubectl.kubernetes.io/default-container: manager
                labels:
                  control-plane: controller-manager
              spec:
                securityContext:
                  runAsNonRoot: true
                  seccompProfile:
                    type: RuntimeDefault
                serviceAccountName: openclaw-operator-controller-manager
                terminationGracePeriodSeconds: 10
                containers:
                  - name: manager
                    image: ghcr.io/openclaw-rocks/openclaw-operator:v0.10.11
                    command:
                      - /manager
                    args:
                      - --leader-elect
                      - --health-probe-bind-address=:8081
                    securityContext:
                      allowPrivilegeEscalation: false
                      capabilities:
                        drop:
                          - ALL
                      readOnlyRootFilesystem: true
                      runAsNonRoot: true
                    livenessProbe:
                      httpGet:
                        path: /healthz
                        port: 8081
                      initialDelaySeconds: 15
                      periodSeconds: 20
                    readinessProbe:
                      httpGet:
                        path: /readyz
                        port: 8081
                      initialDelaySeconds: 5
                      periodSeconds: 10
                    resources:
                      limits:
                        cpu: 500m
                        memory: 256Mi
                      requests:
                        cpu: 100m
                        memory: 128Mi
